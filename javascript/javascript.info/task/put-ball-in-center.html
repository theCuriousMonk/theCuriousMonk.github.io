<!DOCTYPE html><html lang="en">
<!-- Mirrored from javascript.info/task/put-ball-in-center by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 10 Sep 2018 10:52:25 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><script>window.currentUser = null;</script><title itemprop="name">Place the ball in the field center</title><meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes, minimum-scale=1.0"><meta name="apple-mobile-web-app-capable" content="yes"><script>if (window.devicePixelRatio > 1) document.cookie = 'pixelRatio=' + window.devicePixelRatio + ';path=/;expires=Tue, 19 Jan 2038 03:14:07 GMT';</script><link href="http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700%7COpen+Sans+Condensed:700&amp;subset=latin,latin-ext,cyrillic,cyrillic-ext" rel="stylesheet"><link rel="apple-touch-icon-precomposed" href="../img/favicon/apple-touch-icon-precomposed.png"><link rel="canonical" href="put-ball-in-center.html"><meta name="msapplication-TileColor" content="#222A2C"><meta name="msapplication-TileImage" content="/img/favicon/tileicon.png"><!-- favicon the rest--><link rel="icon" href="../img/favicon/favicon.png"><meta itemprop="image" content="https://javascript.info/img/site_preview_en_512x512.png"><meta property="og:title" content="Place the ball in the field center"><meta property="og:image" content="https://javascript.info/img/site_preview_en_1200x630.png"><meta property="og:image:type" content="image/png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta property="fb:admins" content="100001562528165"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Place the ball in the field center"><meta name="twitter:site" content="@iliakan"><meta name="twitter:creator" content="@iliakan"><meta name="twitter:image" content="https://javascript.info/img/site_preview_en_512x512.png"><link href="../pack/styles.b363cbd7204b6ec74a4cbeca7061b31d.css" rel="stylesheet"><script>window.GA_ID = "UA-2056213-15";</script><script>window.YANDEX_METRIKA_ID = 32184394;</script><script>window.GoogleAnalyticsObject="ga",window.ga=function(){window.ga.q.push(arguments)},window.ga.q=[],window.ga.l=Date.now(),ga("create",GA_ID,"auto"),window.currentUser?ga("set","&uid",currentUser.id):ga("set","anonymizeIp",!0),window.addEventListener("error",function(e){var n=(e.filename||e.errorUrl)+": "+(e.lineno||e.errorLine),r=e.stack||e.error&&e.error.stack;ga("send","exception",{exDescription:e.message+" "+n+" "+r,exFatal:!0})});</script><script src="../../www.google-analytics.com/analytics.js" async></script><script>ga('send', 'pageview');</script><script>window.metrika={reachGoal:function(){}},window.yandex_metrika_callbacks=[function(){try{window.metrika=new Ya.Metrika({id:YANDEX_METRIKA_ID,webvisor:!0,clickmap:!0,params:{user:window.currentUser&&window.currentUser.id}}),metrika.trackLinks({delay:150}),window.addEventListener("error",function(r){window.metrika.reachGoal("JSERROR",{src:(r.filename||r.errorUrl)+": "+(r.lineno||r.errorLine),stack:r.stack||r.error&&r.error.stack,message:r.message})})}catch(r){}}];</script><script src="../../mc.yandex.ru/metrika/watch.js" async></script><script>window.RECAPTCHA_ID = "6Lf9NyETAAAAACZlg-a9Us2SxvYbeVC1ROWaWv4O";</script><script src="../inite4da.js?5"></script><script src="../pack/head.5ac6aee21473ea597203.js" defer></script><script src="../pack/tutorial.5ac6aee21473ea597203.js" defer></script><script src="../pack/footer.5ac6aee21473ea597203.js" defer></script></head><body class="no-icons"><script>window.fontTest();</script><div class="page-wrapper"><div class="page"><script>if(localStorage.noSidebar){document.querySelector(".page").classList.remove("page_sidebar_on");var pageWrapper=document.querySelector(".page-wrapper");pageWrapper&&pageWrapper.classList.remove("page-wrapper_sidebar_on")}setTimeout(function(){document.querySelector(".page").classList.add("page_sidebar-animation-on")},0);</script><div class="page__inner"><main class="main main_width-limit"><div style="display:none" class="breadcrumbs"><li itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemref="breadcrumb-1" class="breadcrumbs__item breadcrumbs__item_home"><a href="../index.html" itemprop="url" class="breadcrumbs__link"><span itemprop="title" class="breadcrumbs__hidden-text">Tutorial</span></a></li><li id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemref="breadcrumb-2" itemprop="child" class="breadcrumbs__item"><a href="../ui.html" itemprop="url" class="breadcrumbs__link"><span itemprop="title">Browser: Document, Events, Interfaces</span></a></li><li id="breadcrumb-2" itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemref="breadcrumb-3" itemprop="child" class="breadcrumbs__item"><a href="../document.html" itemprop="url" class="breadcrumbs__link"><span itemprop="title">Document</span></a></li><li id="breadcrumb-3" itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemprop="child" class="breadcrumbs__item"><a href="../size-and-scroll.html" itemprop="url" class="breadcrumbs__link"><span itemprop="title">Element size and scrolling</span></a></li></div><div itemscope itemtype="http://schema.org/TechArticle" class="task-single"><meta itemprop="name" content="Place the ball in the field center"><div itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="email" content="iliakan@gmail.com"><meta itemprop="name" content="Ilya Kantor"></div><a href="../size-and-scroll.html" class="task-single__back"><span>Back to the lesson</span></a><div itemprop="articleBody" class="task task-single__task"><div class="task__header"><div class="task__title-wrap"><h2 class="task__title">Place the ball in the field center</h2></div><div class="task__header-note"><span title="How important is the task, from 1 to 5" class="task__importance">importance: 5</span></div></div><div class="task__content"><p>Here’s how the source document looks:</p>
<div class="code-result">
    <div class="code-result__toolbar toolbar"><div class="toolbar__tool">
        <a href="https://en.js.cx/task/put-ball-in-center/source/" target="_blank" title="open in new window" class="toolbar__button toolbar__button_external"></a>
      </div>
      <div class="toolbar__tool">
        <a href="http://plnkr.co/edit/AQhULEbjxUzFtaQ9cXzw?p=preview" target="_blank" title="open in sandbox"
        data-plunk-id="AQhULEbjxUzFtaQ9cXzw" class="toolbar__button toolbar__button_edit"></a>
      </div>
      </div>
    <iframe class="code-result__iframe" data-trusted="1" style="height:180px" src="https://en.js.cx/task/put-ball-in-center/source/"></iframe>
  </div><p>What are coordinates of the field center?</p>
<p>Calculate them and use to place the ball into the center of the field:</p>
<div class="code-result">
    <div class="code-result__toolbar toolbar"></div>
    <iframe class="code-result__iframe" data-trusted="1" style="height:180px" src="https://en.js.cx/task/put-ball-in-center/solution/"></iframe>
  </div><ul>
<li>The element should be moved by JavaScript, not CSS.</li>
<li>The code should work with any ball size (<code>10</code>, <code>20</code>, <code>30</code> pixels) and any field size, not be bound to the given values.</li>
</ul>
<p>P.S. Sure, centering could be done with CSS, but here we want exactly JavaScript. Further we’ll meet other topics and more complex situations when JavaScript must be used. Here we do a “warm-up”.</p>
<p><a href="http://plnkr.co/edit/AQhULEbjxUzFtaQ9cXzw?p=preview" target="_blank" data-plunk-id="AQhULEbjxUzFtaQ9cXzw">Open the sandbox for the task.</a></p><button type="button" class="task__solution">solution</button><div class="task__answer"><div class="task__answer-content"><p>The ball has <code>position:absolute</code>. It means that its <code>left/top</code> coordinates are measured from the nearest positioned element, that is <code>#field</code> (because it has <code>position:relative</code>).</p>
<p>The coordinates start from the inner left-upper corner of the field:</p>
<figure><div class="image" style="width:224px">
      <div class="image__ratio" style="padding-top:66.96428571428571%"></div>
      <img src="put-ball-in-center/field.png" alt="" width="224" height="150" class="image__image">
      </div></figure><p>The inner field width/height is <code>clientWidth/clientHeight</code>. So the field center has coordinates <code>(clientWidth/2, clientHeight/2)</code>.</p>
<p>…But if we set <code>ball.style.left/top</code> to such values, then not the ball as a whole, but the left-upper edge of the ball would be in the center:</p>
<div data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">ball.style.left = Math.round(field.clientWidth / 2) + 'px';
ball.style.top = Math.round(field.clientHeight / 2) + 'px';</code></pre>
        </div>
      </div>
      
      </div><p>Here’s how it looks:</p>
<div class="code-result">
    <div class="code-result__toolbar toolbar"></div>
    <iframe class="code-result__iframe" data-trusted="1" style="height:180px" src="https://en.js.cx/task/put-ball-in-center/ball-half/"></iframe>
  </div><p>To align the ball center with the center of the field, we should move the ball to the half of its width to the left and to the half of its height to the top:</p>
<div data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">ball.style.left = Math.round(field.clientWidth / 2 - ball.offsetWidth / 2) + 'px';
ball.style.top = Math.round(field.clientHeight / 2 - ball.offsetHeight / 2) + 'px';</code></pre>
        </div>
      </div>
      
      </div><p><strong>Attention: the pitfall!</strong></p>
<p>The code won’t work reliably while <code>&lt;img&gt;</code> has no width/height:</p>
<div data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-markup"><code class="language-markup">&lt;img src=&quot;ball.png&quot; id=&quot;ball&quot;&gt;</code></pre>
        </div>
      </div>
      
      </div><p>When the browser does not know the width/height of an image (from tag attributes or CSS), then it assumes them to equal <code>0</code> until the image finishes loading.</p>
<p>In real life after the first load browser usually caches the image, and on next loads it will have the size immediately.</p>
<p>But on the first load the value of <code>ball.offsetWidth</code> is <code>0</code>. That leads to wrong coordinates.</p>
<p>We should fix that by adding <code>width/height</code> to <code>&lt;img&gt;</code>:</p>
<div data-trusted="1" class="code-example" data-highlight-inline="0:20-42">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-markup"><code class="language-markup">&lt;img src=&quot;ball.png&quot; width=&quot;40&quot; height=&quot;40&quot; id=&quot;ball&quot;&gt;</code></pre>
        </div>
      </div>
      
      </div><p>…Or provide the size in CSS:</p>
<div data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-css"><code class="language-css">#ball {
  width: 40px;
  height: 40px;
}</code></pre>
        </div>
      </div>
      
      </div><p><a href="http://plnkr.co/edit/QILLmmLHurcNzG3c64Jc?p=preview" target="_blank" data-plunk-id="QILLmmLHurcNzG3c64Jc">Open the solution in the sandbox.</a></p></div><button type="button" title="close" class="close-button task__answer-close"></button></div></div></div></div></main></div></div></div><div class="page-footer"><div class="page-footer__left"><ul class="page-footer__list"><li class="page-footer__item">©&nbsp;2007—2018&nbsp; Ilya Kantor</li><li class="page-footer__item"><a href="../about.html#contact-us" class="page-footer__link">contact us</a></li><li class="page-footer__item"><a href="../about.html" class="page-footer__link">about the project</a></li><li class="page-footer__item"><a href="https://learn.javascript.ru/" class="page-footer__link">RU</a> / EN</li></ul></div><div class="page-footer__right"><ul class="page-footer__list"><li class="page-footer__item">powered by <a rel="nofollow" href="http://nodejs.org/" class="page-footer__link">node.js</a>&nbsp;&amp;&nbsp;<a rel="nofollow" href="http://github.com/iliakan/javascript-tutorial-en" class="page-footer__link">open source</a></li></ul></div></div></body>
<!-- Mirrored from javascript.info/task/put-ball-in-center by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 10 Sep 2018 10:52:25 GMT -->
</html>