<!DOCTYPE html><html lang="en">
<!-- Mirrored from javascript.info/coordinates by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 10 Sep 2018 10:50:23 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><script>window.currentUser = null;</script><title itemprop="name">Coordinates</title><meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes, minimum-scale=1.0"><meta name="apple-mobile-web-app-capable" content="yes"><script>if (window.devicePixelRatio > 1) document.cookie = 'pixelRatio=' + window.devicePixelRatio + ';path=/;expires=Tue, 19 Jan 2038 03:14:07 GMT';</script><link href="http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700%7COpen+Sans+Condensed:700&amp;subset=latin,latin-ext,cyrillic,cyrillic-ext" rel="stylesheet"><link rel="apple-touch-icon-precomposed" href="img/favicon/apple-touch-icon-precomposed.png"><link rel="canonical" href="coordinates.html"><meta name="msapplication-TileColor" content="#222A2C"><meta name="msapplication-TileImage" content="/img/favicon/tileicon.png"><!-- favicon the rest--><link rel="icon" href="img/favicon/favicon.png"><meta itemprop="image" content="https://javascript.info/img/site_preview_en_512x512.png"><meta property="og:title" content="Coordinates"><meta property="og:image" content="https://javascript.info/img/site_preview_en_1200x630.png"><meta property="og:image:type" content="image/png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta property="fb:admins" content="100001562528165"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Coordinates"><meta name="twitter:site" content="@iliakan"><meta name="twitter:creator" content="@iliakan"><meta name="twitter:image" content="https://javascript.info/img/site_preview_en_512x512.png"><link href="pack/styles.b363cbd7204b6ec74a4cbeca7061b31d.css" rel="stylesheet"><link rel="prev" href="size-and-scroll-window.html"><link rel="next" href="events.html"><script>window.GA_ID = "UA-2056213-15";</script><script>window.YANDEX_METRIKA_ID = 32184394;</script><script>window.GoogleAnalyticsObject="ga",window.ga=function(){window.ga.q.push(arguments)},window.ga.q=[],window.ga.l=Date.now(),ga("create",GA_ID,"auto"),window.currentUser?ga("set","&uid",currentUser.id):ga("set","anonymizeIp",!0),window.addEventListener("error",function(e){var n=(e.filename||e.errorUrl)+": "+(e.lineno||e.errorLine),r=e.stack||e.error&&e.error.stack;ga("send","exception",{exDescription:e.message+" "+n+" "+r,exFatal:!0})});</script><script src="../www.google-analytics.com/analytics.js" async></script><script>ga('send', 'pageview');</script><script>window.metrika={reachGoal:function(){}},window.yandex_metrika_callbacks=[function(){try{window.metrika=new Ya.Metrika({id:YANDEX_METRIKA_ID,webvisor:!0,clickmap:!0,params:{user:window.currentUser&&window.currentUser.id}}),metrika.trackLinks({delay:150}),window.addEventListener("error",function(r){window.metrika.reachGoal("JSERROR",{src:(r.filename||r.errorUrl)+": "+(r.lineno||r.errorLine),stack:r.stack||r.error&&r.error.stack,message:r.message})})}catch(r){}}];</script><script src="../mc.yandex.ru/metrika/watch.js" async></script><script>window.RECAPTCHA_ID = "6Lf9NyETAAAAACZlg-a9Us2SxvYbeVC1ROWaWv4O";</script><script src="inite4da.js?5"></script><script src="pack/head.5ac6aee21473ea597203.js" defer></script><script>
document.addEventListener('DOMContentLoaded', function() {

let elem = document.getElementById('coords-show-mark');

// no elem in ebook mode
if (elem) {
  elem.onclick = function() {
    let elem = document.getElementById("coords-show-mark");

    function createMessageUnder(elem, text) {
      let coords = elem.getBoundingClientRect();
      let message = document.createElement('div');
      message.style.cssText = "position:fixed; color: red";

      message.style.left = coords.left + "px";
      message.style.top = coords.bottom + "px";

      message.innerHTML = text;

      return message;
    }

    let message = createMessageUnder(elem, 'Hello, world!');
    document.body.append(message);
    setTimeout(() => message.remove(), 5000);
  }
}

});

</script>
<meta property="og:title" content="Coordinates"><meta property="og:type" content="article"><script src="pack/tutorial.5ac6aee21473ea597203.js" defer></script><script src="pack/footer.5ac6aee21473ea597203.js" defer></script></head><body class="no-icons"><script>window.fontTest();</script><div class="page-wrapper page-wrapper_sidebar_on"><!--[if lt IE 10]><div style="color:red;text-align:center">Sorry, IE&lt;10 is not supported, please use a newer browser.</div><![endif]--><div class="sitetoolbar sitetoolbar_tutorial"><div style="display:none" id="notify-en-tutorial" class="notification notification_info notification_top sitetoolbar__notification"><div class="notification__content">The tutorial was recently rewritten from scratch. There may be typos, please use the "Edit on Github" link (in left sidebar in an article, at the bottom) to propose fixes.
Thank you!</div><button title="Close" class="notification__close"></button></div><script>showTopNotification();</script><div class="sitetoolbar__content"><div class="sitetoolbar__logo-wrap"><a href="index.html" class="sitetoolbar__link sitetoolbar__link_logo"><img src="img/sitetoolbar__logo_en.svg" width="200" class="sitetoolbar__logo sitetoolbar__logo_normal" alt=""><img src="img/sitetoolbar__logo_small_en.svg" width="70" class="sitetoolbar__logo sitetoolbar__logo_small" alt=""><script>Array.prototype.forEach.call(document.querySelectorAll("img.sitetoolbar__logo"),function(e){var t=document.createElement("object");t.type="image/svg+xml",t.className=e.className,t.style.cssText="left:0;top:0;position:absolute",t.onload=function(){t.onload=null,e.style.visibility="hidden"},t.data=e.src,e.parentNode.insertBefore(t,e)});</script></a></div><div class="sitetoolbar__nav-toggle-wrap"><button type="button" class="sitetoolbar__nav-toggle"></button></div><nav class="sitetoolbar__sections"><ul class="sitetoolbar__sections-list"><li class="sitetoolbar__section sitetoolbar__section_current"><a href="index.html" class="sitetoolbar__link">Tutorial</a></li><li class="sitetoolbar__section"><a href="courses.html" class="sitetoolbar__link">Courses</a></li></ul></nav><div class="sitetoolbar__book-wrap"><a href="ebook.html" class="buy-book-button"><span class="buy-book-button__extra-text">Buy</span>EPUB/PDF</a></div><div class="sitetoolbar__login-wrap"><button data-action-login class="sitetoolbar__login sitetoolbar__login_unready"></button></div><div class="sitetoolbar__search-wrap"><div class="sitetoolbar__search-content"><form method="GET" action="http://javascript.info/search" class="sitetoolbar__search"><button type="button" class="sitetoolbar__search-toggle"></button><div class="sitetoolbar__search-input"><div class="text-input"><input autofocus name="query" placeholder="Search on Javascript.info" class="text-input__control" type="text"></div><button type="submit" class="sitetoolbar__find">Search</button></div></form></div></div></div><!-- todo: en variant--><div class="tablet-menu"><div class="tablet-menu__line"><div class="tablet-menu__content"><select onchange="if(this.value) window.location.href=this.value" class="input-select input-select_small tablet-menu__nav"><option value="/tutorial" selected>Tutorial</option><option value="/courses">Courses</option></select></div></div><div class="tablet-menu__line"><div class="tablet-menu__content"><form action="http://javascript.info/search/" class="tablet-menu-search"><input type="search" name="query" placeholder="Search in the tutorial" required class="tablet-menu-search__input"><button type="submit" name="type" value="articles" class="tablet-menu-search__button">Search</button></form></div></div><div class="tablet-menu__line"><div class="tablet-menu__content"><a href="tutorial/map.html" data-action="tutorial-map" class="map"><span class="map__text">Tutorial map</span></a></div></div><!--+e.line--><!--  +e.content--><!--    +b("a").tablet-ebook(href="/ebook")--><!--      +e("span").text Купить учебник--><!--      +e("span").note (EPUB + PDF)--><div class="tablet-menu__line"><div class="tablet-menu__content"><div class="share-icons"><span class="share-icons__title">Share</span><a href="https://twitter.com/share?url=https%3A%2F%2Fjavascript.info%2Fcoordinates" class="share share_tw"></a><a href="https://www.facebook.com/sharer/sharer.php?s=100&amp;p%5Burl%5D=https%3A%2F%2Fjavascript.info%2Fcoordinates" class="share share_fb"></a><a href="https://plus.google.com/share?url=https%3A%2F%2Fjavascript.info%2Fcoordinates" class="share share_gp"></a><a href="https://vkontakte.ru/share.php?url=https%3A%2F%2Fjavascript.info%2Fcoordinates" class="share share_vk"></a></div></div></div></div><progress data-sticky value="11" max="27" data-tooltip="Lesson 11 of 27" class="tutorial-progress"></progress></div><div class="page page_sidebar_on"><script>if(localStorage.noSidebar){document.querySelector(".page").classList.remove("page_sidebar_on");var pageWrapper=document.querySelector(".page-wrapper");pageWrapper&&pageWrapper.classList.remove("page-wrapper_sidebar_on")}setTimeout(function(){document.querySelector(".page").classList.add("page_sidebar-animation-on")},0);</script><div class="page__inner"><main class="main main_width-limit"><header class="main__header"><div class="main__header-inner"><ol class="breadcrumbs"><li itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemref="breadcrumb-1" class="breadcrumbs__item breadcrumbs__item_home"><a href="index.html" itemprop="url" class="breadcrumbs__link"><span itemprop="title" class="breadcrumbs__hidden-text">Tutorial</span></a></li><li id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemref="breadcrumb-2" itemprop="child" class="breadcrumbs__item"><a href="ui.html" itemprop="url" class="breadcrumbs__link"><span itemprop="title">Browser: Document, Events, Interfaces</span></a></li><li id="breadcrumb-2" itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemprop="child" class="breadcrumbs__item"><a href="document.html" itemprop="url" class="breadcrumbs__link"><span itemprop="title">Document</span></a></li></ol><h1 class="main__header-title">Coordinates</h1></div></header><div class="content"><article itemscope itemtype="http://schema.org/TechArticle"><meta itemprop="name" content="Coordinates"><div itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="email" content="iliakan@gmail.com"><meta itemprop="name" content="Ilya Kantor"></div><div itemprop="articleBody"><p>To move elements around we should be familiar with coordinates.</p>
<p>Most JavaScript methods deal with one of two coordinate systems:</p>
<ol>
<li>Relative to the window(or another viewport) top/left.</li>
<li>Relative to the document top/left.</li>
</ol>
<p>It’s important to understand the difference and which type is where.</p>
<h2><a class="main__anchor" name="window-coordinates-getboundingclientrect" href="#window-coordinates-getboundingclientrect">Window coordinates: getBoundingClientRect</a></h2><p>Window coordinates start at the left-upper corner of the window.</p>
<p>The method <code>elem.getBoundingClientRect()</code> returns window coordinates for <code>elem</code> as an object with properties:</p>
<ul>
<li><code>top</code> – Y-coordinate for the top element edge,</li>
<li><code>left</code> – X-coordinate for the left element edge,</li>
<li><code>right</code> – X-coordinate for the right element edge,</li>
<li><code>bottom</code> – Y-coordinate for the bottom element edge.</li>
</ul>
<p>Like this:</p>
<figure><div class="image" style="width:501px">
      <div class="image__ratio" style="padding-top:77.04590818363273%"></div>
      <img src="article/coordinates/coords.png" alt="" width="501" height="386" class="image__image">
      </div></figure><p>Window coordinates do not take the scrolled out part of the document into account, they are calculated from the window left-upper corner.</p>
<p>In other words, when we scroll the page, the element goes up or down, <em>its window coordinates change</em>. That’s very important.</p>
<p>Click the button to see its window coordinates:</p>
<input id="brTest" type="button" value="Show button.getBoundingClientRect() for this button" onclick='showRect(this)'/>
<script>
function showRect(elem) {
  let r = elem.getBoundingClientRect();
  alert("{top:"+r.top+", left:"+r.left+", right:"+r.right+", bottom:"+ r.bottom + "}");
}
</script>
<p>If you scroll the page, the button position changes, and window coordinates as well.</p>
<p>Also:</p>
<ul>
<li>Coordinates may be decimal fractions. That’s normal, internally browser uses them for calculations. We don’t have to round them when setting to <code>style.position.left/top</code>, the browser is fine with fractions.</li>
<li>Coordinates may be negative. For instance, if the page is scrolled down and the <code>elem</code> top is now above the window then <code>elem.getBoundingClientRect().top</code> is negative.</li>
<li>Some browsers (like Chrome) also add to the result <code>getBoundingClientRect</code> properties <code>width</code> and <code>height</code>. We can get them also by subtraction: <code>height=bottom-top</code>, <code>width=right-left</code>.</li>
</ul>
<div class="important important_warn">
            <div class="important__header"><span class="important__type">Coordinates right/bottom are different from CSS properties</span></div>
            <div class="important__content"><p>If we compare window coordinates versus CSS positioning, then there are obvious similarities to <code>position:fixed</code> – also the position relative to the viewport.</p>
<p>But in CSS the <code>right</code> property means the distance from the right edge, and the <code>bottom</code> – from the bottom edge.</p>
<p>If we just look at the picture above, we can see that in JavaScript it is not so. All window coordinates are counted from the upper-left corner, including these ones.</p>
</div></div>
<h2><a class="main__anchor" name="elementFromPoint" href="#elementFromPoint">elementFromPoint(x, y)</a></h2><p>The call to <code>document.elementFromPoint(x, y)</code> returns the most nested element at window coordinates <code>(x, y)</code>.</p>
<p>The syntax is:</p>
<div data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">let elem = document.elementFromPoint(x, y);</code></pre>
        </div>
      </div>
      
      </div><p>For instance, the code below highlights and outputs the tag of the element that is now in the middle of the window:</p>
<div data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="run" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="open in sandbox" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">let centerX = document.documentElement.clientWidth / 2;
let centerY = document.documentElement.clientHeight / 2;

let elem = document.elementFromPoint(centerX, centerY);

elem.style.background = &quot;red&quot;;
alert(elem.tagName);</code></pre>
        </div>
      </div>
      
      </div><p>As it uses window coordinates, the element may be different depending on the current scroll position.</p>
<div class="important important_warn">
            <div class="important__header"><span class="important__type">For out-of-window coordinates the <code>elementFromPoint</code> returns <code>null</code></span></div>
            <div class="important__content"><p>The method <code>document.elementFromPoint(x,y)</code> only works if <code>(x,y)</code> are inside the visible area.</p>
<p>If any of the coordinates is negative or exceeds the window width/height, then it returns <code>null</code>.</p>
<p>In most cases such behavior is not a problem, but we should keep that in mind.</p>
<p>Here’s a typical error that may occur if we don’t check for it:</p>
<div data-trusted="1" class="code-example" data-highlight-block="2-2">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">let elem = document.elementFromPoint(x, y);
// if the coordinates happen to be out of the window, then elem = null
elem.style.background = ''; // Error!</code></pre>
        </div>
      </div>
      
      </div></div></div>
<h2><a class="main__anchor" name="using-for-position-fixed" href="#using-for-position-fixed">Using for position:fixed</a></h2><p>Most of time we need coordinates to position something. In CSS, to position an element relative to the viewport we use <code>position:fixed</code> together with <code>left/top</code> (or <code>right/bottom</code>).</p>
<p>We can use <code>getBoundingClientRect</code> to get coordinates of an element, and then to show something near it.</p>
<p>For instance, the function <code>createMessageUnder(elem, html)</code> below shows the message under <code>elem</code>:</p>
<div data-trusted="1" class="code-example" data-highlight-block="8-12">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">let elem = document.getElementById(&quot;coords-show-mark&quot;);

function createMessageUnder(elem, html) {
  // create message element
  let message = document.createElement('div');
  // better to use a css class for the style here
  message.style.cssText = &quot;position:fixed; color: red&quot;;

  // assign coordinates, don't forget &quot;px&quot;!
  let coords = elem.getBoundingClientRect();

  message.style.left = coords.left + &quot;px&quot;;
  message.style.top = coords.bottom + &quot;px&quot;;

  message.innerHTML = html;

  return message;
}

// Usage:
// add it for 5 seconds in the document
let message = createMessageUnder(elem, 'Hello, world!');
document.body.append(message);
setTimeout(() =&gt; message.remove(), 5000);</code></pre>
        </div>
      </div>
      
      </div><p>Click the button to run it:</p>
<p><button id="coords-show-mark">Button with id=“coords-show-mark”, the message will appear under it</button></p>
<p>The code can be modified to show the message at the left, right, below, apply CSS animations to “fade it in” and so on. That’s easy, as we have all the coordinates and sizes of the element.</p>
<p>But note the important detail: when the page is scrolled, the message flows away from the button.</p>
<p>The reason is obvious: the message element relies on <code>position:fixed</code>, so it remains at the same place of the window while the page scrolls away.</p>
<p>To change that, we need to use document-based coordinates and <code>position:absolute</code>.</p>
<h2><a class="main__anchor" name="document-coordinates" href="#document-coordinates">Document coordinates</a></h2><p>Document-relative coordinates start from the left-upper corner of the document, not the window.</p>
<p>In CSS, window coordinates correspond to <code>position:fixed</code>, while document coordinates are similar to <code>position:absolute</code> on top.</p>
<p>We can use <code>position:absolute</code> and <code>top/left</code> to put something at a certain place of the document, so that it remains there during a page scroll. But we need the right coordinates first.</p>
<p>For clarity we’ll call window coordinates <code>(clientX,clientY)</code> and document coordinates <code>(pageX,pageY)</code>.</p>
<p>When the page is not scrolled, then window coordinate and document coordinates are actually the same. Their zero points match too:</p>
<figure><div class="image" style="width:694px">
      <div class="image__ratio" style="padding-top:68.73198847262248%"></div>
      <img src="article/coordinates/document-window-coordinates-zero.png" alt="" width="694" height="477" class="image__image">
      </div></figure><p>And if we scroll it, then <code>(clientX,clientY)</code> change, because they are relative to the window, but <code>(pageX,pageY)</code> remain the same.</p>
<p>Here’s the same page after the vertical scroll:</p>
<figure><div class="image" style="width:690px">
      <div class="image__ratio" style="padding-top:69.27536231884058%"></div>
      <img src="article/coordinates/document-window-coordinates-scroll.png" alt="" width="690" height="478" class="image__image">
      </div></figure><ul>
<li><code>clientY</code> of the header <code>&quot;From today's featured article&quot;</code> became <code>0</code>, because the element is now on window top.</li>
<li><code>clientX</code> didn’t change, as we didn’t scroll horizontally.</li>
<li><code>pageX</code> and <code>pageY</code> coordinates of the element are still the same, because they are relative to the document.</li>
</ul>
<h2><a class="main__anchor" name="getCoords" href="#getCoords">Getting document coordinates</a></h2><p>There’s no standard method to get document coordinates of an element. But it’s easy to write it.</p>
<p>The two coordinate systems are connected by the formula:</p>
<ul>
<li><code>pageY</code> = <code>clientY</code> + height of the scrolled-out vertical part of the document.</li>
<li><code>pageX</code> = <code>clientX</code> + width of the scrolled-out horizontal part of the document.</li>
</ul>
<p>The function <code>getCoords(elem)</code> will take window coordinates from <code>elem.getBoundingClientRect()</code> and add the current scroll to them:</p>
<div data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">// get document coordinates of the element
function getCoords(elem) {
  let box = elem.getBoundingClientRect();

  return {
    top: box.top + pageYOffset,
    left: box.left + pageXOffset
  };
}</code></pre>
        </div>
      </div>
      
      </div><h2><a class="main__anchor" name="summary" href="#summary">Summary</a></h2><p>Any point on the page has coordinates:</p>
<ol>
<li>Relative to the window – <code>elem.getBoundingClientRect()</code>.</li>
<li>Relative to the document – <code>elem.getBoundingClientRect()</code> plus the current page scroll.</li>
</ol>
<p>Window coordinates are great to use with <code>position:fixed</code>, and document coordinates do well with <code>position:absolute</code>.</p>
<p>Both coordinate systems have their “pro” and “contra”, there are times we need one or the other one, just like CSS <code>position</code> <code>absolute</code> and <code>fixed</code>.</p>
</div></article><div class="tasks"><h2 id="tasks" class="tasks__title"><a href="#tasks" class="main__anchor main__anchor_noicon tasks__title-anchor">Tasks</a></h2><div class="task tasks__task"><div class="task__header"><div class="task__title-wrap"><h3 class="task__title"><a href="#find-window-coordinates-of-the-field" name="find-window-coordinates-of-the-field" class="main__anchor">Find window coordinates of the field</a></h3><a href="task/find-point-coordinates.html" target="_blank" class="task__open-link"></a></div><div class="task__header-note"><span title="How important is the task, from 1 to 5" class="task__importance">importance: 5</span></div><div class="task__content"><p>In the iframe below you can see a document with the green “field”.</p>
<p>Use JavaScript to find window coordinates of corners pointed by with arrows.</p>
<p>There’s a small feature implemented in the document for convenience. A click at any place shows coordinates there.</p>
<div class="code-result">
    <div class="code-result__toolbar toolbar"><div class="toolbar__tool">
        <a href="https://en.js.cx/task/find-point-coordinates/source/" target="_blank" title="open in new window" class="toolbar__button toolbar__button_external"></a>
      </div>
      <div class="toolbar__tool">
        <a href="http://plnkr.co/edit/dZXeKjBsG3HbAL1WWT9J?p=preview" target="_blank" title="open in sandbox"
        data-plunk-id="dZXeKjBsG3HbAL1WWT9J" class="toolbar__button toolbar__button_edit"></a>
      </div>
      </div>
    <iframe class="code-result__iframe" data-trusted="1" style="height:360px" src="https://en.js.cx/task/find-point-coordinates/source/"></iframe>
  </div><p>Your code should use DOM to get window coordinates of:</p>
<ol>
<li>Left-upper outer corner (that’s simple).</li>
<li>Right-bottom outer corner (simple too).</li>
<li>Left-upper inner corner (a bit harder).</li>
<li>Right-bottom inner corner (there are several ways, choose one).</li>
</ol>
<p>The coordinates that you calculate should be the same as those returned by the mouse click.</p>
<p>P.S. The code should also work if the element has another size or border, not bound to any fixed values.</p>
<p><a href="http://plnkr.co/edit/dZXeKjBsG3HbAL1WWT9J?p=preview" target="_blank" data-plunk-id="dZXeKjBsG3HbAL1WWT9J">Open the sandbox for the task.</a></p><button type="button" class="task__solution">solution</button><div class="task__answer"><div class="task__step"><button type="button" class="task__step-show">Outer corners</button><div class="task__answer-content"><h4 class="task__step-title">Outer corners</h4><p>Outer corners are basically what we get from  <a href="https://developer.mozilla.org/en-US/docs/DOM/element.getBoundingClientRect">elem.getBoundingClientRect()</a>.</p>
<p>Coordinates of the upper-left corner <code>answer1</code> and the bottom-right corner <code>answer2</code>:</p>
<div data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">let coords = elem.getBoundingClientRect();

let answer1 = [coords.left, coords.top];
let answer2 = [coords.right, coords.bottom];</code></pre>
        </div>
      </div>
      
      </div></div></div><div class="task__step"><button type="button" class="task__step-show">Left-upper inner corner</button><div class="task__answer-content"><h4 class="task__step-title">Left-upper inner corner</h4><p>That differs from the outer corner by the border width. A reliable way to get the distance is <code>clientLeft/clientTop</code>:</p>
<div data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">let answer3 = [coords.left + field.clientLeft, coords.top + field.clientTop];</code></pre>
        </div>
      </div>
      
      </div></div></div><div class="task__step"><button type="button" class="task__step-show">Right-bottom inner corner</button><div class="task__answer-content"><h4 class="task__step-title">Right-bottom inner corner</h4><p>In our case we need to substract the border size from the outer coordinates.</p>
<p>We could use CSS way:</p>
<div data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">let answer4 = [
  coords.right - parseInt(getComputedStyle(field).borderRightWidth),
  coords.bottom - parseInt(getComputedStyle(field).borderBottomWidth)
];</code></pre>
        </div>
      </div>
      
      </div><p>An alternative way would be to add <code>clientWidth/clientHeight</code> to coordinates of the left-upper corner. That’s probably even better:</p>
<div data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">let answer4 = [
  coords.left + elem.clientLeft + elem.clientWidth,
  coords.top + elem.clientTop + elem.clientHeight
];</code></pre>
        </div>
      </div>
      
      </div><p><a href="http://plnkr.co/edit/xSRb3GL9rlCJIHKnW22d?p=preview" target="_blank" data-plunk-id="xSRb3GL9rlCJIHKnW22d">Open the solution in the sandbox.</a></p></div></div><button type="button" title="close" class="close-button task__answer-close"></button></div></div></div></div><div class="task tasks__task"><div class="task__header"><div class="task__title-wrap"><h3 class="task__title"><a href="#show-a-note-near-the-element" name="show-a-note-near-the-element" class="main__anchor">Show a note near the element</a></h3><a href="task/position-at.html" target="_blank" class="task__open-link"></a></div><div class="task__header-note"><span title="How important is the task, from 1 to 5" class="task__importance">importance: 5</span></div><div class="task__content"><p>Create a function <code>positionAt(anchor, position, elem)</code> that positions <code>elem</code>, depending on  <code>position</code> either at the top (<code>&quot;top&quot;</code>), right (<code>&quot;right&quot;</code>) or bottom (<code>&quot;bottom&quot;</code>) of the element <code>anchor</code>.</p>
<p>Use it to make a function <code>showNote(anchor, position, html)</code> that shows an element with the class <code>&quot;note&quot;</code> and the text <code>html</code> at the given position near the anchor.</p>
<p>Show the notes like here:</p>
<div class="code-result">
    <div class="code-result__toolbar toolbar"><div class="toolbar__tool">
        <a href="https://en.js.cx/task/position-at/solution/" target="_blank" title="open in new window" class="toolbar__button toolbar__button_external"></a>
      </div>
      </div>
    <iframe class="code-result__iframe" data-trusted="1" style="height:350px" src="https://en.js.cx/task/position-at/solution/"></iframe>
  </div><p>P.S. The note should have <code>position:fixed</code> for this task.</p>
<p><a href="http://plnkr.co/edit/KQDvaJOFbDNnyp1SyiFV?p=preview" target="_blank" data-plunk-id="KQDvaJOFbDNnyp1SyiFV">Open the sandbox for the task.</a></p><button type="button" class="task__solution">solution</button><div class="task__answer"><div class="task__answer-content"><p>In this task we only need to accuracely calculate the coorindates. See the code for details.</p>
<p>Please note: the elements must be in the document to read <code>offsetHeight</code> and other properties.
A hidden (<code>display:none</code>) or out of the document element has no size.</p>
<p><a href="http://plnkr.co/edit/qu0WNxrlTy2la4MEVYhK?p=preview" target="_blank" data-plunk-id="qu0WNxrlTy2la4MEVYhK">Open the solution in the sandbox.</a></p></div><button type="button" title="close" class="close-button task__answer-close"></button></div></div></div></div><div class="task tasks__task"><div class="task__header"><div class="task__title-wrap"><h3 class="task__title"><a href="#show-a-note-near-the-element-absolute" name="show-a-note-near-the-element-absolute" class="main__anchor">Show a note near the element (absolute)</a></h3><a href="task/position-at-absolute.html" target="_blank" class="task__open-link"></a></div><div class="task__header-note"><span title="How important is the task, from 1 to 5" class="task__importance">importance: 5</span></div><div class="task__content"><p>Modify the solution of the <a href="task/position-at.html">previous task</a> so that the note uses <code>position:absolute</code> instead of <code>position:fixed</code>.</p>
<p>That will prevent its “runaway” from the element when the page scrolls.</p>
<p>Take the solution of that task as a starting point. To test the scroll, add the style <code>&lt;body style=&quot;height: 2000px&quot;&gt;</code>.</p>
<button type="button" class="task__solution">solution</button><div class="task__answer"><div class="task__answer-content"><p>The solution is actually pretty simple:</p>
<ul>
<li>Use <code>position:absolute</code> in CSS instead of <code>position:fixed</code> for <code>.note</code>.</li>
<li>Use the function <a href="coordinates.html#getCoords">getCoords()</a> from the chapter <a href="coordinates.html">Coordinates</a> to get document-relative coordinates.</li>
</ul>
<p><a href="http://plnkr.co/edit/mBra4qMFDUMyZCKjpxHN?p=preview" target="_blank" data-plunk-id="mBra4qMFDUMyZCKjpxHN">Open the solution in the sandbox.</a></p></div><button type="button" title="close" class="close-button task__answer-close"></button></div></div></div></div><div class="task tasks__task"><div class="task__header"><div class="task__title-wrap"><h3 class="task__title"><a href="#position-the-note-inside-absolute" name="position-the-note-inside-absolute" class="main__anchor">Position the note inside (absolute)</a></h3><a href="task/position-inside-absolute.html" target="_blank" class="task__open-link"></a></div><div class="task__header-note"><span title="How important is the task, from 1 to 5" class="task__importance">importance: 5</span></div><div class="task__content"><p>Extend the previous task <a href="task/position-at-absolute.html">Show a note near the element (absolute)</a>: teach the function  <code>positionAt(anchor, position, elem)</code> to insert <code>elem</code> inside the <code>anchor</code>.</p>
<p>New values for <code>position</code>:</p>
<ul>
<li><code>top-out</code>, <code>right-out</code>, <code>bottom-out</code> – work the same as before, they insert the <code>elem</code> over/right/under <code>anchor</code>.</li>
<li><code>top-in</code>, <code>right-in</code>, <code>bottom-in</code> – insert <code>elem</code> inside the <code>anchor</code>: stick it to the upper/right/bottom edge.</li>
</ul>
<p>For instance:</p>
<div data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">// shows the note above blockquote
positionAt(blockquote, &quot;top-out&quot;, note);

// shows the note inside blockquote, at the top
positionAt(blockquote, &quot;top-in&quot;, note);</code></pre>
        </div>
      </div>
      
      </div><p>The result:</p>
<div class="code-result">
    <div class="code-result__toolbar toolbar"><div class="toolbar__tool">
        <a href="https://en.js.cx/task/position-inside-absolute/solution/" target="_blank" title="open in new window" class="toolbar__button toolbar__button_external"></a>
      </div>
      </div>
    <iframe class="code-result__iframe" data-trusted="1" style="height:310px" src="https://en.js.cx/task/position-inside-absolute/solution/"></iframe>
  </div><p>As the source code, take the solution of the task <a href="task/position-at-absolute.html">Show a note near the element (absolute)</a>.</p>
<button type="button" class="task__solution">solution</button><div class="task__answer"><div class="task__answer-content"><p><a href="http://plnkr.co/edit/hH7h4TaYPLpks0GuBpiq?p=preview" target="_blank" data-plunk-id="hH7h4TaYPLpks0GuBpiq">Open the solution in the sandbox.</a></p></div><button type="button" title="close" class="close-button task__answer-close"></button></div></div></div></div></div><!--if lang == 'en'--><!--  include /blocks/banner-bottom.en--></div><div class="page__nav-wrap"><a href="size-and-scroll-window.html" data-tooltip="Window sizes and scrolling" class="page__nav page__nav_prev"><span class="page__nav-text"><span class="page__nav-text-shortcut"></span></span><span class="page__nav-text-alternate">Previous lesson</span></a><a href="events.html" data-tooltip="Introduction into Events" class="page__nav page__nav_next"><span class="page__nav-text"><span class="page__nav-text-shortcut"></span></span><span class="page__nav-text-alternate">Next lesson</span></a></div><div class="article-tablet-foot tablet-only"><div class="article-tablet-foot__layout"><div class="share-icons"><span class="share-icons__title">Share</span><a href="https://twitter.com/share?url=https%3A%2F%2Fjavascript.info%2Fcoordinates" class="share share_tw"></a><a href="https://www.facebook.com/sharer/sharer.php?s=100&amp;p%5Burl%5D=https%3A%2F%2Fjavascript.info%2Fcoordinates" class="share share_fb"></a><a href="https://plus.google.com/share?url=https%3A%2F%2Fjavascript.info%2Fcoordinates" class="share share_gp"></a><a href="https://vkontakte.ru/share.php?url=https%3A%2F%2Fjavascript.info%2Fcoordinates" class="share share_vk"></a></div><div class="article-tablet-foot__map"><a href="tutorial/map.html" data-action="tutorial-map" class="map"><span class="map__text">Tutorial map</span></a></div></div></div><div id="comments" class="comments"><div class="comments__header"><h2 class="comments__header-title"><a href="#comments" name="comments">Comments</a></h2><div class="comments__read-before"><span class="comments__read-before-link">read this before commenting…</span><div class="comments__read-before-popup"><div class="comments__read-before-popup-i"><ul><li>You're welcome to post additions, questions to the articles and answers to them.</li><li>To insert a few words of code, use the <code>&lt;code&gt;</code> tag, for several lines – use <code>&lt;pre&gt;</code>, for more than 10 lines – use a sandbox (<a href='http://plnkr.co/edit/?p=preview'>plnkr</a>, <a href='http://jsbin.com/'>JSBin</a>, <a href='http://codepen.io/'>codepen</a>…)</li><li>If you can't understand something in the article – please elaborate.</li></ul></div></div></div></div></div><div id="disqus_thread"></div><script>var disqus_config = function() { if (!this.page) this.page = {}; Object.assign(this.page, {"url":"https:\/\/javascript.info\/coordinates","identifier":"\/coordinates","title":"Coordinates"}); };</script><script>var disqus_shortname = "javascriptinfo";</script><script>var disqus_enabled = true;</script></main></div><div class="page__sidebar sidebar sidebar_sticky-footer"><button data-sidebar-toggle class="sidebar__toggle"></button><a href="tutorial/map.html" data-action="tutorial-map" data-tooltip="Tutorial map" class="map"></a><div class="sidebar__inner"><div class="sidebar__content"><div class="sidebar__section"><h4 class="sidebar__section-title">Chapter</h4><nav class="sidebar__navigation"><ul class="sidebar__navigation-links"><li class="sidebar__navigation-link"><a href="document.html" class="sidebar__link">Document</a></li></ul></nav></div><div class="sidebar__section"><h4 class="sidebar__section-title">Lesson navigation</h4><nav class="sidebar__navigation"><ul class="sidebar__navigation-links"><li class="sidebar__navigation-link"><a href="#window-coordinates-getboundingclientrect" class="sidebar__link">Window coordinates: getBoundingClientRect</a></li><li class="sidebar__navigation-link"><a href="#elementFromPoint" class="sidebar__link">elementFromPoint(x, y)</a></li><li class="sidebar__navigation-link"><a href="#using-for-position-fixed" class="sidebar__link">Using for position:fixed</a></li><li class="sidebar__navigation-link"><a href="#document-coordinates" class="sidebar__link">Document coordinates</a></li><li class="sidebar__navigation-link"><a href="#getCoords" class="sidebar__link">Getting document coordinates</a></li><li class="sidebar__navigation-link"><a href="#summary" class="sidebar__link">Summary</a></li></ul></nav></div><div class="sidebar__section"><nav class="sidebar__navigation"><ul class="sidebar__navigation-links"><li class="sidebar__navigation-link"><a href="#tasks" class="sidebar__link">Tasks (4)</a></li><li class="sidebar__navigation-link"><a href="#comments" class="sidebar__link">Comments</a></li></ul></nav></div><div class="sidebar__section"><div class="sidebar__section-title">Share</div><a href="https://twitter.com/share?url=https%3A%2F%2Fjavascript.info%2Fcoordinates" class="share share_tw sidebar__share"></a><a href="https://www.facebook.com/sharer/sharer.php?s=100&amp;p%5Burl%5D=https%3A%2F%2Fjavascript.info%2Fcoordinates" class="share share_fb sidebar__share"></a><a href="https://plus.google.com/share?url=https%3A%2F%2Fjavascript.info%2Fcoordinates" class="share share_gp sidebar__share"></a></div><div class="sidebar__section"><a href="https://github.com/iliakan/javascript-tutorial-en/tree/master/2-ui/1-document/11-coordinates/article.md" class="sidebar__link">Edit on Github</a></div></div></div></div></div></div><div class="page-footer"><div class="page-footer__left"><ul class="page-footer__list"><li class="page-footer__item">©&nbsp;2007—2018&nbsp; Ilya Kantor</li><li class="page-footer__item"><a href="about.html#contact-us" class="page-footer__link">contact us</a></li><li class="page-footer__item"><a href="about.html" class="page-footer__link">about the project</a></li><li class="page-footer__item"><a href="https://learn.javascript.ru/" class="page-footer__link">RU</a> / EN</li></ul></div><div class="page-footer__right"><ul class="page-footer__list"><li class="page-footer__item">powered by <a rel="nofollow" href="http://nodejs.org/" class="page-footer__link">node.js</a>&nbsp;&amp;&nbsp;<a rel="nofollow" href="http://github.com/iliakan/javascript-tutorial-en" class="page-footer__link">open source</a></li></ul></div></div></body>
<!-- Mirrored from javascript.info/coordinates by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 10 Sep 2018 10:50:37 GMT -->
</html>